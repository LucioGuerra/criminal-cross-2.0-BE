# ==========================
# PostgreSQL Datasource
# ==========================
quarkus.datasource.db-kind=postgresql
quarkus.datasource.jdbc.url=jdbc:postgresql://localhost:5432/athlium-pg
quarkus.datasource.username=root
quarkus.datasource.password=root

# Hibernate ORM
quarkus.hibernate-orm.database.generation=drop-and-create
# (o 'drop-and-create' si quer√©s limpiar todo cada vez)
# quarkus.hibernate-orm.database.generation=drop-and-create

# Mostrar SQLs
quarkus.hibernate-orm.log.sql=true

# MongoDB
quarkus.mongodb.connection-string=mongodb://root:root@localhost:27017/athlium-mongo?authSource=admin
quarkus.mongodb.database=athlium-mongo

# Flyway
quarkus.flyway.migrate-at-start=false

# ==========================
# Firebase Configuration
# ==========================
# Path to Firebase service account credentials JSON file
# Set via environment variable: FIREBASE_CREDENTIALS_PATH
firebase.credentials.path=${FIREBASE_CREDENTIALS_PATH:src/main/resources/athlium-credentials.json}

# Firebase project ID (optional, usually auto-detected from credentials)
firebase.project-id=${FIREBASE_PROJECT_ID:}

# Enable mock mode for development without Firebase credentials
# Set to true to use mock authentication (DO NOT USE IN PRODUCTION)
firebase.mock.enabled=${FIREBASE_MOCK_ENABLED:true}

# ==========================
# Auth Token Configuration
# ==========================
# Access token expiration in minutes (for Phase 2 - custom JWT)
auth.access-token.expiration-minutes=15

# Refresh token expiration in days (for Phase 2)
auth.refresh-token.expiration-days=30

# ==========================
# SmallRye JWT Configuration
# ==========================
# JWT issuer (who generates the token)
mp.jwt.verify.issuer=https://athlium.com

# Auto-generate keypair for development (DO NOT USE IN PRODUCTION)
# In production, use mp.jwt.verify.publickey.location and smallrye.jwt.sign.key.location
smallrye.jwt.sign.key.location=/privateKey.pem
mp.jwt.verify.publickey.location=/publicKey.pem

# ==========================
# CORS Configuration (MVP)
# ==========================
quarkus.http.cors=true
quarkus.http.cors.origins=/.*/
quarkus.http.cors.methods=GET,PUT,POST,PATCH,DELETE,OPTIONS
quarkus.http.cors.headers=accept, authorization, content-type, x-requested-with, origin
quarkus.http.cors.access-control-allow-credentials=true

# ==========================
# Production Profile
# ==========================
%prod.quarkus.datasource.jdbc.url=${DB_URL:jdbc:postgresql://localhost:5432/athlium-pg}
%prod.quarkus.datasource.username=${DB_USERNAME:root}
%prod.quarkus.datasource.password=${DB_PASSWORD:root}
%prod.quarkus.hibernate-orm.database.generation=none
%prod.quarkus.flyway.migrate-at-start=true

%prod.quarkus.mongodb.connection-string=${MONGO_URL:mongodb://root:root@localhost:27017/athlium-mongo?authSource=admin}
%prod.quarkus.mongodb.database=${MONGO_DB:athlium-mongo}

%prod.firebase.mock.enabled=false
%prod.firebase.credentials.path=${FIREBASE_CREDENTIALS_PATH}

%prod.smallrye.jwt.sign.key.location=${JWT_PRIVATE_KEY_LOCATION:/privateKey.pem}
%prod.mp.jwt.verify.publickey.location=${JWT_PUBLIC_KEY_LOCATION:/publicKey.pem}
